<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloom for Ashfia ðŸŒ¸</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:linear-gradient(180deg,#fff7fb,#f2fff8);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  align-items:center;
  height:100vh;
}

h1{
  font-family:'Playfair Display',serif;
  margin:20px 0 5px;
  font-size:2rem;
  color:#332;
}

.sub{
  font-size:0.9rem;
  color:#665;
  margin-bottom:15px;
}

#bouquetArea{
  position:relative;
  width:520px;
  height:470px;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  overflow:hidden;
}

#bouquet{
  position:absolute;
  bottom:100px;
  width:380px;
  height:260px;
  display:flex;
  justify-content:center;
  align-items:flex-end;
}

.flower{
  position:absolute;
  font-size:80px;
  transition:all 0.4s cubic-bezier(.2,.9,.2,1);
  animation:popIn 0.4s ease;
  user-select:none;
  pointer-events:auto;
}

@keyframes popIn{
  from{opacity:0; transform:scale(0.4)}
  to{opacity:1; transform:scale(1)}
}

#vase{
  width:180px;
  height:130px;
  border-radius:0 0 90px 90px;
  background:linear-gradient(180deg,#ffe4f0,#ffcde4);
  position:absolute;
  bottom:0;
  box-shadow:0 10px 30px rgba(255,105,160,0.15);
}

.controls{
  display:flex;
  gap:12px;
  margin-top:15px;
}

.pick{
  width:55px;
  height:55px;
  cursor:pointer;
  border-radius:12px;
  background:white;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 6px 15px rgba(0,0,0,0.08);
  transition:0.2s;
  font-size:28px;
}
.pick:hover{transform:scale(1.1)}

button{
  margin-top:20px;
  padding:12px 30px;
  border:none;
  border-radius:18px;
  font-weight:600;
  font-size:1rem;
  transition:0.3s ease;
}

#bloomBtn{
  background:linear-gradient(90deg,#ff6fa5,#ff9ec6);
  color:white;
  box-shadow:0 8px 20px rgba(255,105,160,0.25);
  cursor:pointer;
}

#bloomBtn:disabled{
  background:#ccc;
  box-shadow:none;
  cursor:not-allowed;
}

#messageBox{
  position:absolute;
  top:40%;
  left:50%;
  transform:translate(-50%,-50%);
  background:white;
  padding:25px 35px;
  border-radius:20px;
  box-shadow:0 20px 50px rgba(0,0,0,0.15);
  font-family:'Playfair Display';
  font-size:1.3rem;
  text-align:center;
  display:none;
  opacity:0;
  transition:opacity 0.6s ease;
  max-width:80%;
  z-index: 100;
}

.burstFlower{
  position:absolute;
  font-size:40px;
  pointer-events:none;
  animation:explode 1.4s ease-out forwards;
}

@keyframes explode{
  0%{opacity:1;transform:scale(0.4)}
  100%{opacity:0;transform:translate(var(--x),var(--y)) scale(1.2)}
}
</style>
</head>
<body>

<h1>I'll still love you when the rest of the world doesn't ðŸŒ¸</h1>

<div id="bouquetArea">
  <div id="bouquet"></div>
  <div id="vase"></div>
</div>

<div class="controls">
  <div class="pick" onclick="addFlower('ðŸŒ¹')">ðŸŒ¹</div>
  <div class="pick" onclick="addFlower('ðŸŒ·')">ðŸŒ·</div>
  <div class="pick" onclick="addFlower('ðŸŒ¼')">ðŸŒ¼</div>
  <div class="pick" onclick="addFlower('ðŸŒ¸')">ðŸŒ¸</div>
  <div class="pick" onclick="addFlower('ðŸŒ»')">ðŸŒ»</div>
</div>

<button id="bloomBtn" onclick="bloom()" disabled>Bloom ðŸŒ¸</button>

<div id="messageBox"></div>

<script>
const bouquet = document.getElementById("bouquet");
const bloomBtn = document.getElementById("bloomBtn");
const messageBox = document.getElementById("messageBox");

/*
  Messages are stored as JSON below. 
  You can edit/add lines inside the "messages" array.
*/
const messagesJSON = `{
  "messages": [
    "Some flowers arrive late - but they bloom brighter.",
    "You deserve bouquets in every universe.",
    "Even if no one handed you flowers, you are one.",
    "Distance can't stop love from blooming.",
    "The prettiest things grow quietly.",
    "You are someone's favorite flower.",
    "Petals fall, memories stay.",
    "Small gestures are big hearts.",
    "Let yourself open - gently.",
    "Bloom where you are planted.",
    "There is courage in softness.",
    "Every season brings different colors.",
    "You were made to shine, even through storms.",
    "Keep tending your little joys.",
    "Some gardens are built from maybes and courage.",
    "Ashfia, you grew in places that weren't always gentle - and still chose kindness.",
    "Little sister energy, giant heart.",
    "Your softness is not weakness; it's quiet power.",
    "Even oceans away, your light reaches.",
    "You make ordinary days feel like spring.",
    "The world feels safer because you exist in it.",
    "You carry warmth like sunlight in your hands.",
    "Ashfia, you don't just bloom - you make others bloom too.",
    "Your laughter is the sound of petals opening.",
    "Some people are flowers. You are a whole garden.",
    "Growing up hasn't taken your sweetness - it has refined it.",
    "You are proof that gentle souls survive and shine.",
    "Wherever you go, you plant comfort.",
    "You are still becoming - and that is beautiful."
  ]
}
`;

let messages;
try {
  const parsed = JSON.parse(messagesJSON);
  messages = Array.isArray(parsed.messages) ? parsed.messages : [];
} catch (e) {
  console.error("Failed to parse messages JSON:", e);
  messages = [
    "Some flowers arrive late - but they bloom brighter.",
    "You deserve bouquets in every universe.",
    "Even if no one handed you flowers, you are one."
  ];
}

function addFlower(emoji){
  const count = bouquet.children.length;
  if(count >= 20) return;

  const flower = document.createElement("div");
  flower.className = "flower";
  flower.innerHTML = emoji;
  // append first so offset sizes are measurable
  bouquet.appendChild(flower);

  // We'll constrain flowers to appear inside the visible bounds of #bouquet
  const bw = bouquet.clientWidth;   // 380 (CSS)
  const bh = bouquet.clientHeight;  // 260 (CSS)
  const fw = flower.offsetWidth || 60;
  const fh = flower.offsetHeight || 60;
  const padding = 8;

  // x between padding and bw - fw - padding
  const x = Math.random() * (Math.max(0, bw - fw - padding*2)) + padding;
  // bottom between padding and bh - fh - padding (so they stay nicely inside the bouquet)
  const bottom = Math.random() * (Math.max(0, bh - fh - padding*2)) + padding;

  // position flower inside the bouquet element
  flower.style.left = x + "px";
  flower.style.bottom = bottom + "px";
  flower.style.zIndex = count;

  // enable bloom button when there are at least 10 flowers
  if(bouquet.children.length >= 10){
    bloomBtn.disabled = false;
  }
}

function bloom(){
  if(bouquet.children.length < 10) return;

  messageBox.style.display = "none";
  messageBox.style.opacity = 0;

  for(let i=0;i<40;i++){
    const bf = document.createElement("div");
    bf.className="burstFlower";
    bf.innerHTML="ðŸŒ¸";
    // position explosion around the midpoint of the bouquetArea
    bf.style.left = (window.innerWidth/2) + "px";
    bf.style.top = (window.innerHeight/2 - 40) + "px";
    bf.style.setProperty("--x",(Math.random()*700-350)+"px");
    bf.style.setProperty("--y",(Math.random()*500-250)+"px");
    document.body.appendChild(bf);
    setTimeout(()=>bf.remove(),1400);
  }

  const randomMessage = messages[Math.floor(Math.random()*messages.length)];
  messageBox.innerHTML = randomMessage;
  messageBox.style.display = "block";

  setTimeout(()=>{
    messageBox.style.opacity = 1;
  },100);
}

let draggedFlower = null;
let offsetX = 0;
let offsetY = 0;

function startDrag(e) {
  if(e.target.classList.contains("flower")) {
    draggedFlower = e.target;
    const rect = draggedFlower.getBoundingClientRect();
    const bouquetRect = bouquet.getBoundingClientRect();
    offsetX = e.clientX - rect.left;
    offsetY = e.clientY - rect.top;
  }
}

function moveDrag(e) {
  if(draggedFlower) {
    const bouquetRect = bouquet.getBoundingClientRect();
    const newX = e.clientX - bouquetRect.left - offsetX;
    const newY = e.clientY - bouquetRect.top - offsetY;
    draggedFlower.style.left = newX + "px";
    draggedFlower.style.bottom = "auto";
    draggedFlower.style.top = newY + "px";
  }
}

function stopDrag() {
  draggedFlower = null;
}

document.addEventListener("mousedown", startDrag);
document.addEventListener("mousemove", moveDrag);
document.addEventListener("mouseup", stopDrag);
</script>

</body>
</html>
